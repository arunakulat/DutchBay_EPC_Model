# full_model_variables_updated.yaml  (repo root)
# Master inputs for Dutch Bay wind appraisal — all policy/assumptions live here.

project:
  name: Dutch Bay Wind Project
  capacity_mw: 150            # variable: 90..150 by scenarios
  capacity_factor: 0.40       # or use availability_pct/loss_factor instead
  degradation: 0.006          # per-year energy degradation (fraction, 0..1)

  timeline:
    # nominal operating life (exclude construction); adapter uses this length to build series
    lifetime_years: 20

tariff:
  # The PPA is in LKR, unindexed. Use this key; adapters convert via FX per year.
  lkr_per_kwh: 20.30

fx:
  # Either give explicit curve, OR start + annual depreciation
  start_lkr_per_usd: 300
  annual_depr: 0.03
  # curve_lkr_per_usd: []  # optional explicit list if you want to override start+depr

capex:
  # Provide either total or per-MW; no floors here (enforced by validation/scenarios).
  usd_total: 225000000        # example: 225 MUSD total
  # usd_per_mw: 1500000       # alternative shape

opex:
  # You may combine fixed and per-MWh, and combine USD + LKR legs; adapter sums them.
  usd_per_year: 6000000       # example: 6 MUSD/y total
  # lkr_per_year: 0
  # usd_per_mwh: 0
  # lkr_per_mwh: 0

# ---------------------------
# Financing terms (schema-backed; nested form)
# ---------------------------
Financing_Terms:
  # Debt sizing and style
  debt_ratio: 0.70
  tenor_years: 15
  interest_only_years: 2
  amortization_style: auto      # auto | target_dscr | annuity | straight_line

  # Rate input style – pick ONE: interest_rate_nominal OR (base_rate + margin_bps)
  interest_rate_nominal: 0.08   # decimal (8%)

  # Tranche mix caps (total debt composition)
  mix:
    lkr_max: 0.45               # ≤ 45% of total debt in LKR
    dfi_max: 0.10               # ≤ 10% of total debt from DFI
    usd_commercial_min: 0.45    # optional floor for USD commercial

  # Tranche rate floors (decimal)
  rates:
    lkr_min: 0.08               # ≥ 8% for LKR leg
    usd_commercial_min: 0.075   # ≥ 7.5% for USD commercial
    dfi_min: 0.065              # ≥ 6.5% for DFI

  # DSCR sculpting & covenant
  target_dscr: 1.30
  min_dscr: 1.20
  dscr_probability_basis: P50   # or P90; optional dscr_haircut_factor instead
  # dscr_haircut_factor: 0.90

  # Reserves / receivables guarantee
  reserves:
    dsra_months: 6              # 0 if you rely on receivables guarantee
    receivables_guarantee_months: 9
  use_revenue_guarantee: false
  guarantee_revenue_pct: 0.0075 # 0.75% of annual revenue as fee proxy
  guarantee_max_months: 9

  # Fees (optional)
  fees:
    upfront_pct: 0.00
    commitment_pct: 0.00

  # Hard covenant enforcement
  enforce_hard_covenants: false # set true to raise on dscr_min<min_dscr or balloon>0 at maturity